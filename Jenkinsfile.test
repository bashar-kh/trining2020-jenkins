#!/bin/groovy
pipeline {
    agent none
    stages {
        stage('Init') {
    		matrix {
			agent {
				docker {
					image "${PLATFORM}"
		     			args '-u 0'
				}
			}
    			axes {
        			axis {
            				name 'PLATFORM'
            				values 'fedora:29', 'fedora:30', 'fedora:31'
        			}
   			}	
    		}
           	 steps {
                	copyArtifacts(projectName: 'bkh_build_rpm')
                	sh('ls')
            	}
            	steps {
                	sh('dnf install -y hello-[^d]*rpm')
                	sh('hello')
            	}
        }
    }
}
