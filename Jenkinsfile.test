#!/bin/groovy
pipeline {
    stages {
        stage('Init') {
    		matrix {
    			axes {
        			axis {
            				name 'PLATFORM'
            				values 'fedora:29', 'fedora:30', 'fedora:31'
        			}
   			}	
    		}
		agent {
			docker {
				image "${PLATFORM}"
	     			args '-u 0'
			}
		}
           	 steps {
                	copyArtifacts(projectName: 'bkh_build_rpm')
                	sh('ls')
            	}
            	steps {
                	sh('dnf install -y hello-[^d]*rpm')
                	sh('hello')
            	}
        }
    }
}
