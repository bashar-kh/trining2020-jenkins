#!/bin/groovy
pipeline {
    matrix {
    	axes {
        	axis {
            		name 'PLATFORM'
            		values 'fedora:29', 'fedora:30', 'fedora:31'
        	}
   	}	
    }
    stages {
	agent {
		docker {
			image "${PLATFORM}"
	     		args '-u 0'
		}
	}
        stage('Init') {
            steps {
                copyArtifacts(projectName: 'bkh_build_rpm')
                sh('ls')
            }
        }
        stage('test') {
            steps {
                sh('dnf install -y hello-[^d]*rpm')
                sh('hello')
            }
        }
    }
}
